\appendix
\chapter{Michelson Implementations of \texttt{Foo} and \texttt{Bar}}\label{apx:cost_analysis_contract}
The following contracts are the Michelson implementations of the dummy contracts given in \secref{sec:usecase_cost}.
\section{Foo}
\lstinputlisting[basicstyle=\linespread{1.0}\fontfamily{lmr}\selectfont\small,
				 backgroundcolor=\color{cverbbg},
				 linewidth=14cm,
				 xleftmargin=0.5cm,
				 frame=lr,
				 framesep=8pt,
				 framerule=0pt,
				 captionpos=b,
				 numbers=none,
				 language=Michelson,
				 caption=Dummy Michelson contract executing a dynamic loop (\texttt{Foo.tz})]{listings/foo.tz}
				 
\section{Bar}
\lstinputlisting[basicstyle=\linespread{1.0}\fontfamily{lmr}\selectfont\small,
				 backgroundcolor=\color{cverbbg},
				 linewidth=14cm,
				 xleftmargin=0.5cm,
				 frame=lr,
				 framesep=8pt,
				 framerule=0pt,
				 captionpos=b,
				 numbers=none,
				 language=Michelson,
				 caption=Dummy Michelson contract iterating over a dynamic list (\texttt{Bar.tz})]{listings/bar.tz}

\chapter{Assertion Grammar in EBNF}\label{apx:grammar}
The following two versions of a grammar in extended Backus-Naur form (EBNF) implement the prefix and infix notations for the assertion syntax. 

\section{Prefix Notation}
\lstinputlisting[basicstyle=\linespread{1.0}\fontfamily{lmr}\selectfont\small,
				 backgroundcolor=\color{cverbbg},
				 linewidth=14cm,
				 xleftmargin=0.5cm,
				 frame=lr,
				 framesep=8pt,
				 framerule=0pt,
				 captionpos=b,
				 numbers=none,
				 language=,
				 caption=Assertion grammar with prefix notation]{../grammar/assertion_grammar_prefix.txt}

\section{Infix Notation}
\lstinputlisting[basicstyle=\linespread{1.0}\fontfamily{lmr}\selectfont\small,
				 backgroundcolor=\color{cverbbg},
				 linewidth=14cm,
				 xleftmargin=0.5cm,
				 frame=lr,
				 framesep=8pt,
				 framerule=0pt,
				 captionpos=b,
				 numbers=none,
				 language=,
				 caption=Assertion grammar with infix notation]{../grammar/assertion_grammar_infix.txt}

\chapter{List Accessing in Michelson}\label{apx:nth}

The following listings show the implementation of the list accessing operator \texttt{nth} using the pre-defined loop instruction. \lstref{lst:nth_liq} shows a readable implementation in Liquidity; it contains necessary boilerplate code to make it compilable. The compilation result (including the boilerplate code) is given in \lstref{lst:nth_liq}.

\lstinputlisting[basicstyle=\linespread{1.0}\fontfamily{lmr}\selectfont\small,
				 backgroundcolor=\color{cverbbg},
				 linewidth=14cm,
				 xleftmargin=0.5cm,
				 frame=lr,
				 framesep=8pt,
				 framerule=0pt,
				 captionpos=b,
				 numbers=none,
				 language=,
				 label=lst:nth_liq,
				 caption=Possible implementation of \texttt{nth} for lists in Liquidity]{listings/nth.liq}
				 
\lstinputlisting[basicstyle=\linespread{1.0}\fontfamily{lmr}\selectfont\small,
				 backgroundcolor=\color{cverbbg},
				 linewidth=14cm,
				 xleftmargin=0.5cm,
				 frame=lr,
				 framesep=8pt,
				 framerule=0pt,
				 captionpos=b,
				 numbers=none,
				 language=,
				 label=lst:nth_tz,
				 caption=Implementation of \texttt{nth} for lists in Michelson]{listings/nth.tz}

\chapter{Controller Contract Code in \\ \mbox{Liquidity}}\label{apx:controller_liq}
\lstinputlisting[label=lst:manager_templ_liq, language=Michelson, caption=Controller code in Liquidity]{listings/controller.liq}

\chapter{Controller Contract Code in Michelson}\label{apx:controller_michelson}
\lstinputlisting[basicstyle=\linespread{1.0}\fontfamily{lmr}\selectfont\small,
				 backgroundcolor=\color{cverbbg},
				 linewidth=14cm,
				 xleftmargin=0.5cm,
				 frame=lr,
				 framesep=8pt,
				 framerule=0pt,
				 captionpos=b,
				 numbers=none,
				 language=Michelson,
				 label=lst:controller_michelson,
				 caption=Controller code in Michelson featuring one gateway and one assertion entrypoint]{listings/controller.tz}
				 
\chapter{Distributed Michelson Implementation of \texttt{Foo} and \texttt{Bar}}\label{apx:foobar_distributed}
The following contracts are a restructuring of the contracts given in Appendix \ref{apx:cost_analysis_contract}, s.t. they implement the modular orchestration scheme.

\section{Contract Foo}
\lstinputlisting[basicstyle=\linespread{1.0}\fontfamily{lmr}\selectfont\small,
				 backgroundcolor=\color{cverbbg},
				 linewidth=14cm,
				 xleftmargin=0.5cm,
				 frame=lr,
				 framesep=8pt,
				 framerule=0pt,
				 captionpos=b,
				 numbers=none,
				 language=Michelson,
				 label=lst:foo_manager,
				 caption=Controller contract for \texttt{Foo.tz}]{listings/foo_manager.tz}
\lstinputlisting[basicstyle=\linespread{1.0}\fontfamily{lmr}\selectfont\small,
				 backgroundcolor=\color{cverbbg},
				 linewidth=14cm,
				 xleftmargin=0.5cm,
				 frame=lr,
				 framesep=8pt,
				 framerule=0pt,
				 captionpos=b,
				 numbers=none,
				 language=Michelson,
				 label=lst:foo_assertion,
				 caption=Assertion contract for \texttt{Foo.tz}]{listings/foo_assertion.tz}
\lstinputlisting[basicstyle=\linespread{1.0}\fontfamily{lmr}\selectfont\small,
				 backgroundcolor=\color{cverbbg},
				 linewidth=14cm,
				 xleftmargin=0.5cm,
				 frame=lr,
				 framesep=8pt,
				 framerule=0pt,
				 captionpos=b,
				 numbers=none,
				 language=Michelson,
				 label=lst:foo_parent,
				 caption=Parent contract (\texttt{Foo.tz})]{listings/foo_parent.tz}

\section{Contract Bar}
\lstinputlisting[basicstyle=\linespread{1.0}\fontfamily{lmr}\selectfont\small,
				 backgroundcolor=\color{cverbbg},
				 linewidth=14cm,
				 xleftmargin=0.5cm,
				 frame=lr,
				 framesep=8pt,
				 framerule=0pt,
				 captionpos=b,
				 numbers=none,
				 language=Michelson,
				 label=lst:bar_manager,
				 caption=Controller contract for \texttt{Bar.tz}]{listings/bar_manager.tz}
\lstinputlisting[basicstyle=\linespread{1.0}\fontfamily{lmr}\selectfont\small,
				 backgroundcolor=\color{cverbbg},
				 linewidth=14cm,
				 xleftmargin=0.5cm,
				 frame=lr,
				 framesep=8pt,
				 framerule=0pt,
				 captionpos=b,
				 numbers=none,
				 language=Michelson,
				 label=lst:bar_assertion,
				 caption=Assertion contract for \texttt{Bar.tz}]{listings/bar_assertion.tz}
\lstinputlisting[basicstyle=\linespread{1.0}\fontfamily{lmr}\selectfont\small,
				 backgroundcolor=\color{cverbbg},
				 linewidth=14cm,
				 xleftmargin=0.5cm,
				 frame=lr,
				 framesep=8pt,
				 framerule=0pt,
				 captionpos=b,
				 numbers=none,
				 language=Michelson,
				 label=lst:bar_parent,
				 caption=Parent contract (\texttt{Bar.tz})]{listings/bar_parent.tz}
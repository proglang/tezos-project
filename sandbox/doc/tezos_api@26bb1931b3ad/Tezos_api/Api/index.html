<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Api (tezos_api@26bb1931b3ad.Tezos_api.Api)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos_api@26bb1931b3ad</a> &#x00BB; <a href="../index.html">Tezos_api</a> &#x00BB; Api</nav><h1>Module <code>Tezos_api.Api</code></h1></header><dl><dt class="spec type" id="type-puk"><a href="#type-puk" class="anchor"></a><code><span class="keyword">type</span> puk</code><code> = Tezos_base__TzPervasives.Signature.public_key</code></dt><dd><p>A public key of an account (implicit or originated)</p></dd></dl><dl><dt class="spec type" id="type-pukh"><a href="#type-pukh" class="anchor"></a><code><span class="keyword">type</span> pukh</code><code> = Tezos_base__TzPervasives.Signature.public_key_hash</code></dt><dd><p>A public key hash of an account (implicit or originated)</p></dd></dl><dl><dt class="spec type" id="type-contract"><a href="#type-contract" class="anchor"></a><code><span class="keyword">type</span> contract</code><code> = Tezos_protocol_006_PsCARTHA.Protocol.Alpha_context.Contract.t</code></dt><dd><p>Contract representation (implicit or originated)</p></dd></dl><dl><dt class="spec type" id="type-oph"><a href="#type-oph" class="anchor"></a><code><span class="keyword">type</span> oph</code><code> = Tezos_base__TzPervasives.Operation_hash.t</code></dt><dd><p>Operation hash</p></dd></dl><dl><dt class="spec type" id="type-blockh"><a href="#type-blockh" class="anchor"></a><code><span class="keyword">type</span> blockh</code><code> = Tezos_base__TzPervasives.Block_hash.t</code></dt><dd><p>Block hash</p></dd></dl><dl><dt class="spec module" id="module-Tez_t"><a href="#module-Tez_t" class="anchor"></a><code><span class="keyword">module</span> <a href="Tez_t/index.html">Tez_t</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Representation of Tezos tokens (tez)</p></dd></dl><dl><dt class="spec type" id="type-op_result"><a href="#type-op_result" class="anchor"></a><code><span class="keyword">type</span> op_result</code><code> = </code><code>{</code><table class="record"><tr id="type-op_result.block_hash" class="anchored"><td class="def field"><a href="#type-op_result.block_hash" class="anchor"></a><code>block_hash : <a href="index.html#type-blockh">blockh</a>;</code></td><td class="doc"><p>Block in which transaction was included</p></td></tr><tr id="type-op_result.rpc_position" class="anchored"><td class="def field"><a href="#type-op_result.rpc_position" class="anchor"></a><code>rpc_position : int * int;</code></td><td class="doc"><p>The indices where the operation can be found within the block</p></td></tr><tr id="type-op_result.balance_updates" class="anchored"><td class="def field"><a href="#type-op_result.balance_updates" class="anchor"></a><code>balance_updates : Tezos_protocol_006_PsCARTHA.Protocol.Alpha_context.Delegate.balance_updates;</code></td><td class="doc"><p>List of balance updates</p></td></tr><tr id="type-op_result.consumed_gas" class="anchored"><td class="def field"><a href="#type-op_result.consumed_gas" class="anchor"></a><code>consumed_gas : int;</code></td><td class="doc"><p>Amount of gas burned during execution</p></td></tr><tr id="type-op_result.storage" class="anchored"><td class="def field"><a href="#type-op_result.storage" class="anchor"></a><code>storage : <span>Tezos_protocol_006_PsCARTHA.Protocol.Alpha_context.Script.expr option</span>;</code></td><td class="doc"><p>Contents of storage</p></td></tr><tr id="type-op_result.originated_contracts" class="anchored"><td class="def field"><a href="#type-op_result.originated_contracts" class="anchor"></a><code>originated_contracts : <span><a href="index.html#type-contract">contract</a> list</span>;</code></td><td class="doc"><p>List of originated contracts</p></td></tr><tr id="type-op_result.storage_size" class="anchored"><td class="def field"><a href="#type-op_result.storage_size" class="anchor"></a><code>storage_size : int;</code></td><td class="doc"><p>Amount of storage used during transaction</p></td></tr><tr id="type-op_result.paid_storage_size_diff" class="anchored"><td class="def field"><a href="#type-op_result.paid_storage_size_diff" class="anchor"></a><code>paid_storage_size_diff : int;</code></td><td class="doc"><p>Storage fees paid</p></td></tr><tr id="type-op_result.big_map_diff" class="anchored"><td class="def field"><a href="#type-op_result.big_map_diff" class="anchor"></a><code>big_map_diff : <span>Tezos_protocol_006_PsCARTHA.Protocol.Alpha_context.Contract.big_map_diff option</span>;</code></td><td class="doc"><p>Changes in the BigMap</p></td></tr><tr id="type-op_result.allocated_destination_contract" class="anchored"><td class="def field"><a href="#type-op_result.allocated_destination_contract" class="anchor"></a><code>allocated_destination_contract : bool;</code></td><td class="doc"><p>Indicates whether the dest account was empty or not</p></td></tr></table><code>}</code></dt><dd><p>Result of an operation which has been successfully included into a block</p></dd></dl><dl><dt class="spec type" id="type-reason"><a href="#type-reason" class="anchor"></a><code><span class="keyword">type</span> reason</code><code> = </code><table class="variant"><tr id="type-reason.Timeout" class="anchored"><td class="def constructor"><a href="#type-reason.Timeout" class="anchor"></a><code>| </code><code><span class="constructor">Timeout</span></code></td><td class="doc"><p>The transaction timed out and was removed from the Mempool (tbd if this case can be distinguished clearly from others)</p></td></tr><tr id="type-reason.Skipped" class="anchored"><td class="def constructor"><a href="#type-reason.Skipped" class="anchor"></a><code>| </code><code><span class="constructor">Skipped</span></code></td><td class="doc"><p>The transaction was skipped due to a previously failed operation</p></td></tr><tr id="type-reason.Backtracked" class="anchored"><td class="def constructor"><a href="#type-reason.Backtracked" class="anchor"></a><code>| </code><code><span class="constructor">Backtracked</span></code></td><td class="doc"><p>The transaction was backtracked due to a subsequently failed operation</p></td></tr><tr id="type-reason.Reason" class="anchored"><td class="def constructor"><a href="#type-reason.Reason" class="anchor"></a><code>| </code><code><span class="constructor">Reason</span> <span class="keyword">of</span> <a href="../Api_error/index.html#type-rejection_message">Api_error.rejection_message</a></code></td><td class="doc"><p>The transaction failed due to <code>failure_message</code></p></td></tr><tr id="type-reason.Unknown_reason" class="anchored"><td class="def constructor"><a href="#type-reason.Unknown_reason" class="anchor"></a><code>| </code><code><span class="constructor">Unknown_reason</span> <span class="keyword">of</span> string</code></td><td class="doc"><p>None of the above match - reason list should be extended if this occurs</p></td></tr></table></dt><dd><p>Possible reasons for a transaction rejection</p></dd></dl><dl><dt class="spec type" id="type-status"><a href="#type-status" class="anchor"></a><code><span class="keyword">type</span> status</code><code> = </code><table class="variant"><tr id="type-status.Still_pending" class="anchored"><td class="def constructor"><a href="#type-status.Still_pending" class="anchor"></a><code>| </code><code><span class="constructor">Still_pending</span></code></td><td class="doc"><p>Transaction hasn't been included yet (prevalidated, delayed or unprocessed)</p></td></tr><tr id="type-status.Accepted" class="anchored"><td class="def constructor"><a href="#type-status.Accepted" class="anchor"></a><code>| </code><code><span class="constructor">Accepted</span> <span class="keyword">of</span> <a href="index.html#type-op_result">op_result</a></code></td><td class="doc"><p>Transaction was included with <code>result</code></p></td></tr><tr id="type-status.Rejected" class="anchored"><td class="def constructor"><a href="#type-status.Rejected" class="anchor"></a><code>| </code><code><span class="constructor">Rejected</span> <span class="keyword">of</span> <a href="index.html#type-reason">reason</a></code></td><td class="doc"><p>Transaction was rejected due to <a href="index.html#type-reason"><code>reason</code></a></p></td></tr><tr id="type-status.Unprocessed" class="anchored"><td class="def constructor"><a href="#type-status.Unprocessed" class="anchor"></a><code>| </code><code><span class="constructor">Unprocessed</span></code></td><td class="doc"><p>Transaction not yet prevalidated</p></td></tr><tr id="type-status.Missing" class="anchored"><td class="def constructor"><a href="#type-status.Missing" class="anchor"></a><code>| </code><code><span class="constructor">Missing</span></code></td><td class="doc"><p>Transaction couldn't be found (tbd should this be timeout?)</p></td></tr></table></dt><dd><p>Status of an injected transaction</p></dd></dl><dl><dt class="spec value" id="val-get_puk_from_alias"><a href="#val-get_puk_from_alias" class="anchor"></a><code><span class="keyword">val</span> get_puk_from_alias : string <span>&#45;&gt;</span> <span><a href="index.html#type-puk">puk</a> <a href="../Api_error/Answer/index.html#type-t">Api_error.Answer.t</a></span></code></dt><dd><p><code>get_puk_from_alias s</code> expects an alias of an implicit account and returns the associated public key of the account.</p><dl><dt>parameter s</dt><dd><p>alias of implicit account</p></dd></dl><dl><dt>returns</dt><dd><p><a href="index.html#type-puk"><code>puk</code></a> the associated public key</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-get_puk_from_hash"><a href="#val-get_puk_from_hash" class="anchor"></a><code><span class="keyword">val</span> get_puk_from_hash : string <span>&#45;&gt;</span> <span><a href="index.html#type-puk">puk</a> <a href="../Api_error/Answer/index.html#type-t">Api_error.Answer.t</a></span></code></dt><dd><p><code>get_puk_from_hash s</code> expects a public key hash as string and returns the associated public key of the account.</p><dl><dt>parameter s</dt><dd><p>public key hash</p></dd></dl><dl><dt>returns</dt><dd><p><a href="index.html#type-puk"><code>puk</code></a> the associated public key</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-get_pukh_from_alias"><a href="#val-get_pukh_from_alias" class="anchor"></a><code><span class="keyword">val</span> get_pukh_from_alias : string <span>&#45;&gt;</span> <span><a href="index.html#type-pukh">pukh</a> <a href="../Api_error/Answer/index.html#type-t">Api_error.Answer.t</a></span></code></dt><dd><p><code>get_pukh_from_alias s</code> expects an alias of an implicit account and returns the associated public key hash.</p><dl><dt>parameter s</dt><dd><p>alias of implicit account</p></dd></dl><dl><dt>returns</dt><dd><p><a href="index.html#type-pukh"><code>pukh</code></a> the associated public key hash</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-get_contract"><a href="#val-get_contract" class="anchor"></a><code><span class="keyword">val</span> get_contract : string <span>&#45;&gt;</span> <span><a href="index.html#type-contract">contract</a> <a href="../Api_error/Answer/index.html#type-t">Api_error.Answer.t</a></span></code></dt><dd><p><code>get_contract s</code> expects an alias, public key hash or contract hash as string and returns the associated contract representation.</p><dl><dt>parameter s</dt><dd><p>alias, public key hash or contract hash</p></dd></dl><dl><dt>returns</dt><dd><p><a href="index.html#type-contract"><code>contract</code></a> the associated contract representation</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-set_port"><a href="#val-set_port" class="anchor"></a><code><span class="keyword">val</span> set_port : int <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set_port p</code> specifies under which port the RPC interface of the node is reachable if the default (8732) does not apply.</p><dl><dt>parameter p</dt><dd><p>the RPC port of the node</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-set_debugmode"><a href="#val-set_debugmode" class="anchor"></a><code><span class="keyword">val</span> set_debugmode : bool <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set_debugmode f</code> enable/disable the debug mode - in debug mode, the whole Tezos error trace is printed</p></dd></dl><dl><dt class="spec value" id="val-set_basedir"><a href="#val-set_basedir" class="anchor"></a><code><span class="keyword">val</span> set_basedir : string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set_basedir d</code> specifies the path of the tezos-client base directory (normally /home/&lt;username&gt;/.tezos-client/)</p><dl><dt>parameter d</dt><dd><p>path of the tezos-client base directory</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-transfer"><a href="#val-transfer" class="anchor"></a><code><span class="keyword">val</span> transfer : <a href="Tez_t/index.html#type-t">Tez_t.t</a> <span>&#45;&gt;</span> <a href="index.html#type-pukh">pukh</a> <span>&#45;&gt;</span> <a href="index.html#type-contract">contract</a> <span>&#45;&gt;</span> <a href="Tez_t/index.html#type-t">Tez_t.t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-oph">oph</a> <a href="../Api_error/Answer/index.html#type-t">Api_error.Answer.t</a></span></code></dt><dd><p><code>transfer a src dst fee</code> injects a transfer transaction.</p><dl><dt>parameter a</dt><dd><p>the amount of tez to transfer</p></dd></dl><dl><dt>parameter src</dt><dd><p>the public key hash of the sender</p></dd></dl><dl><dt>parameter dst</dt><dd><p>the contract representation of the receiver</p></dd></dl><dl><dt>parameter fee</dt><dd><p>the amount of fees to pay to the baker</p></dd></dl><dl><dt>returns</dt><dd><p><a href="index.html#type-oph"><code>oph</code></a> the operation hash of the injected transaction</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-query"><a href="#val-query" class="anchor"></a><code><span class="keyword">val</span> query : <a href="index.html#type-oph">oph</a> <span>&#45;&gt;</span> <span><a href="index.html#type-status">status</a> <a href="../Api_error/Answer/index.html#type-t">Api_error.Answer.t</a></span></code></dt><dd><p><code>query op</code> retrieves the current status of an injected transaction</p><dl><dt>parameter op</dt><dd><p>the operation hash of the injected transaction</p></dd></dl><dl><dt>returns</dt><dd><p><a href="index.html#type-status"><code>status</code></a> the status of the transaction</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-get_balance"><a href="#val-get_balance" class="anchor"></a><code><span class="keyword">val</span> get_balance : <a href="index.html#type-contract">contract</a> <span>&#45;&gt;</span> <span><a href="Tez_t/index.html#type-t">Tez_t.t</a> <a href="../Api_error/Answer/index.html#type-t">Api_error.Answer.t</a></span></code></dt><dd><p><code>get_balance c</code> returns the balance of a contract (implicit or originated)</p><dl><dt>parameter f</dt><dd><p>the contract representation of the target</p></dd></dl><dl><dt>returns</dt><dd><p><a href="Tez_t/index.html#type-t"><code>Tez_t.t</code></a> the balance of the target contract</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-call_contract"><a href="#val-call_contract" class="anchor"></a><code><span class="keyword">val</span> call_contract : <a href="Tez_t/index.html#type-t">Tez_t.t</a> <span>&#45;&gt;</span> <a href="index.html#type-pukh">pukh</a> <span>&#45;&gt;</span> <a href="index.html#type-contract">contract</a> <span>&#45;&gt;</span> <span>?&#8288;entrypoint:string</span> <span>&#45;&gt;</span> <span>?&#8288;arg:string</span> <span>&#45;&gt;</span> <a href="Tez_t/index.html#type-t">Tez_t.t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-oph">oph</a> <a href="../Api_error/Answer/index.html#type-t">Api_error.Answer.t</a></span></code></dt><dd><p><code>call_contract a src dst ?ep ?arg fee</code> calls a contract.</p><dl><dt>parameter a</dt><dd><p>amount of tez to transfer</p></dd></dl><dl><dt>parameter src</dt><dd><p>the public key hash of the caller</p></dd></dl><dl><dt>parameter dst</dt><dd><p>the contract representation of the callee</p></dd></dl><dl><dt>parameter ?ep</dt><dd><p>specifies the entrypoint - if not set, the default entrypoint will be called</p></dd></dl><dl><dt>parameter ?arg</dt><dd><p>argument passed to the contract's script (if needed)</p></dd></dl><dl><dt>parameter fee</dt><dd><p>the amount of fees to pay to the baker</p></dd></dl></dd></dl></div></body></html>